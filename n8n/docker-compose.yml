# LocalAgent + n8n Integration
# 启动 n8n 工作流自动化平台

services:
  # ============================================
  # n8n - 工作流自动化引擎
  # 访问地址: http://localhost:5678
  # ============================================
  n8n:
    image: n8nio/n8n:latest
    container_name: n8n-localagent
    restart: unless-stopped
    ports:
      - "5678:5678"
    volumes:
      # 数据存储在用户目录，而不是项目中
      # Windows: C:\Users\<username>\.n8n
      # Linux/Mac: ~/.n8n
      - ~/.n8n:/home/node/.n8n
    environment:
      - GENERIC_TIMEZONE=Asia/Shanghai
      - TZ=Asia/Shanghai
      - N8N_SECURE_COOKIE=false
    extra_hosts:
      # 允许容器访问宿主机的 LocalAgent API
      - "host.docker.internal:host-gateway"

networks:
  default:
    driver: bridge
